{"ast":null,"code":"var _jsxFileName = \"/Users/jpnarchi/Desktop/project12/src/components/MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = ({\n  incidents\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [loadError, setLoadError] = useState(false);\n  useEffect(() => {\n    // Verificar carga de Leaflet\n    const checkLeafletLoaded = () => {\n      if (window.L) {\n        setMapLoaded(true);\n      } else {\n        setLoadError(true);\n      }\n    };\n\n    // Manejar errores de carga\n    window.addEventListener('error', event => {\n      if (event.message.includes('Leaflet')) {\n        setLoadError(true);\n      }\n    });\n\n    // Intentar cargar Leaflet\n    if (typeof window.L === 'undefined') {\n      const leafletScript = document.createElement('script');\n      leafletScript.src = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.js';\n      leafletScript.async = true;\n      leafletScript.onload = checkLeafletLoaded;\n      leafletScript.onerror = () => setLoadError(true);\n      document.body.appendChild(leafletScript);\n    } else {\n      checkLeafletLoaded();\n    }\n    return () => {\n      // Limpiar listeners\n      window.removeEventListener('error', () => {});\n    };\n  }, []);\n  useEffect(() => {\n    if (!mapLoaded || loadError || !mapRef.current) return;\n    try {\n      const L = window.L;\n      if (!L) {\n        console.error('Leaflet no se ha cargado correctamente');\n        setLoadError(true);\n        return;\n      }\n      const map = L.map(mapRef.current).setView([4.7110, -74.0721], 12);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors'\n      }).addTo(map);\n\n      // Resto de la lógica de marcadores...\n      incidents.forEach(incident => {\n        if (incident.coordinates) {\n          const markerColor = incident.severity === 'Alto' ? 'red' : 'orange';\n          const icon = L.divIcon({\n            className: 'custom-marker',\n            html: `\n              <div class=\"relative\">\n                <div style=\"background-color:${markerColor};width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;\">\n                  ${incident.type[0]}\n                </div>\n                <div class=\"absolute -top-2 -right-2 bg-black text-white rounded-full w-5 h-5 flex items-center justify-center text-xs\">\n                  ${incident.severity === 'Alto' ? '!' : ''}\n                </div>\n              </div>\n            `,\n            iconSize: [30, 30]\n          });\n          const marker = L.marker(incident.coordinates, {\n            icon\n          }).addTo(map);\n          marker.bindPopup(`\n            <div class=\"p-2\">\n              <h3 class=\"font-bold text-orange-500 text-lg\">${incident.type}</h3>\n              <p class=\"text-gray-700\">${incident.description}</p>\n              <div class=\"flex justify-between items-center mt-2\">\n                <span class=\"text-sm ${incident.severity === 'Alto' ? 'text-red-500' : 'text-yellow-500'} font-bold\">\n                  Severidad: ${incident.severity}\n                </span>\n                <span class=\"text-xs text-gray-500\">${incident.date}</span>\n              </div>\n            </div>\n          `, {\n            maxWidth: 300\n          });\n        }\n      });\n      return () => {\n        map.remove();\n      };\n    } catch (error) {\n      console.error('Error al cargar el mapa:', error);\n      setLoadError(true);\n    }\n  }, [mapLoaded, incidents, loadError]);\n  if (loadError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-[70vh] flex items-center justify-center bg-red-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 font-bold\",\n          children: \"Error al cargar el mapa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Por favor, recarga la p\\xE1gina o verifica tu conexi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this);\n  }\n  if (!mapLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-[70vh] flex items-center justify-center bg-gray-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-orange-500 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Cargando mapa...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    className: \"w-full h-[70vh] rounded-lg shadow-lg border-4 border-orange-500\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"i4lrlepUfw19GGGgmXRRPHjjsaY=\");\n_c = MapComponent;\nexport default MapComponent;\n\n// DONE\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","MapComponent","incidents","_s","mapRef","mapLoaded","setMapLoaded","loadError","setLoadError","checkLeafletLoaded","window","L","addEventListener","event","message","includes","leafletScript","document","createElement","src","async","onload","onerror","body","appendChild","removeEventListener","current","console","error","map","setView","tileLayer","attribution","addTo","forEach","incident","coordinates","markerColor","severity","icon","divIcon","className","html","type","iconSize","marker","bindPopup","description","date","maxWidth","remove","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","$RefreshReg$"],"sources":["/Users/jpnarchi/Desktop/project12/src/components/MapComponent.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nconst MapComponent = ({ incidents }) => {\n  const mapRef = useRef(null);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [loadError, setLoadError] = useState(false);\n\n  useEffect(() => {\n    // Verificar carga de Leaflet\n    const checkLeafletLoaded = () => {\n      if (window.L) {\n        setMapLoaded(true);\n      } else {\n        setLoadError(true);\n      }\n    };\n\n    // Manejar errores de carga\n    window.addEventListener('error', (event) => {\n      if (event.message.includes('Leaflet')) {\n        setLoadError(true);\n      }\n    });\n\n    // Intentar cargar Leaflet\n    if (typeof window.L === 'undefined') {\n      const leafletScript = document.createElement('script');\n      leafletScript.src = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.js';\n      leafletScript.async = true;\n      leafletScript.onload = checkLeafletLoaded;\n      leafletScript.onerror = () => setLoadError(true);\n      document.body.appendChild(leafletScript);\n    } else {\n      checkLeafletLoaded();\n    }\n\n    return () => {\n      // Limpiar listeners\n      window.removeEventListener('error', () => {});\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!mapLoaded || loadError || !mapRef.current) return;\n\n    try {\n      const L = window.L;\n      \n      if (!L) {\n        console.error('Leaflet no se ha cargado correctamente');\n        setLoadError(true);\n        return;\n      }\n\n      const map = L.map(mapRef.current).setView([4.7110, -74.0721], 12);\n\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors'\n      }).addTo(map);\n\n      // Resto de la lógica de marcadores...\n      incidents.forEach(incident => {\n        if (incident.coordinates) {\n          const markerColor = incident.severity === 'Alto' ? 'red' : 'orange';\n          const icon = L.divIcon({\n            className: 'custom-marker',\n            html: `\n              <div class=\"relative\">\n                <div style=\"background-color:${markerColor};width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;\">\n                  ${incident.type[0]}\n                </div>\n                <div class=\"absolute -top-2 -right-2 bg-black text-white rounded-full w-5 h-5 flex items-center justify-center text-xs\">\n                  ${incident.severity === 'Alto' ? '!' : ''}\n                </div>\n              </div>\n            `,\n            iconSize: [30, 30]\n          });\n\n          const marker = L.marker(incident.coordinates, { icon }).addTo(map);\n          \n          marker.bindPopup(`\n            <div class=\"p-2\">\n              <h3 class=\"font-bold text-orange-500 text-lg\">${incident.type}</h3>\n              <p class=\"text-gray-700\">${incident.description}</p>\n              <div class=\"flex justify-between items-center mt-2\">\n                <span class=\"text-sm ${incident.severity === 'Alto' ? 'text-red-500' : 'text-yellow-500'} font-bold\">\n                  Severidad: ${incident.severity}\n                </span>\n                <span class=\"text-xs text-gray-500\">${incident.date}</span>\n              </div>\n            </div>\n          `, {\n            maxWidth: 300\n          });\n        }\n      });\n\n      return () => {\n        map.remove();\n      };\n    } catch (error) {\n      console.error('Error al cargar el mapa:', error);\n      setLoadError(true);\n    }\n  }, [mapLoaded, incidents, loadError]);\n\n  if (loadError) {\n    return (\n      <div className=\"w-full h-[70vh] flex items-center justify-center bg-red-100\">\n        <div className=\"text-center\">\n          <p className=\"text-red-500 font-bold\">Error al cargar el mapa</p>\n          <p className=\"text-gray-600\">Por favor, recarga la página o verifica tu conexión</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!mapLoaded) {\n    return (\n      <div className=\"w-full h-[70vh] flex items-center justify-center bg-gray-100\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-orange-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Cargando mapa...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={mapRef} \n      className=\"w-full h-[70vh] rounded-lg shadow-lg border-4 border-orange-500\"\n    />\n  );\n};\n\nexport default MapComponent;\n\n// DONE"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}